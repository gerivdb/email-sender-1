<#
.SYNOPSIS
    Version simplifiée de l'implémentation de la Phase 6.
#>

# Afficher un message de démarrage
Write-Host "Démarrage de la Phase 6 (version simplifiée)..."

# Vérifier l'environnement
$currentDir = Get-Location
Write-Host "Répertoire courant: $currentDir"

# Créer le répertoire de logs si nécessaire
$logDir = Join-Path -Path $PSScriptRoot -ChildPath "logs"
if (-not (Test-Path -Path $logDir -PathType Container)) {
    New-Item -Path $logDir -ItemType Directory -Force | Out-Null
    Write-Host "Répertoire de logs créé: $logDir"
}

# Journaliser le démarrage
$logFile = Join-Path -Path $logDir -ChildPath "phase6_simple.log"
$timestamp = Get-Date -Format "yyyy-MM-dd HH:mm:ss"
"[$timestamp] Démarrage de la Phase 6 (version simplifiée)" | Out-File -FilePath $logFile -Append

# Rechercher les scripts PowerShell
$scriptsDir = Join-Path -Path (Split-Path -Parent (Split-Path -Parent $PSScriptRoot)) -ChildPath ""
if (Test-Path -Path $scriptsDir -PathType Container) {
    $scripts = Get-ChildItem -Path $scriptsDir -Recurse -File -Filter "*.ps1" | Where-Object { -not $_.FullName.Contains(".bak") }
    Write-Host "Nombre de scripts trouvés: $($scripts.Count)"
    "[$timestamp] Nombre de scripts trouvés: $($scripts.Count)" | Out-File -FilePath $logFile -Append

    # Afficher les 5 premiers scripts
    Write-Host "Premiers scripts trouvés:"
    foreach ($script in $scripts | Select-Object -First 5) {
        Write-Host "  - $($script.FullName)"
        "[$timestamp] Script: $($script.FullName)" | Out-File -FilePath $logFile -Append
    }
} else {
    Write-Host "Répertoire des scripts non trouvé: $scriptsDir"
    "[$timestamp] Répertoire des scripts non trouvé: $scriptsDir" | Out-File -FilePath $logFile -Append
}

# Afficher un message de fin
Write-Host "Phase 6 (version simplifiée) terminée."
"[$timestamp] Phase 6 (version simplifiée) terminée" | Out-File -FilePath $logFile -Append
