<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Q-Q Plot: Normale standard vs. Exponentielle</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #333333;
            color: #ffffff;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .chart-container {
            width: 800px;
            height: 600px;
            margin: 0 auto;
        }
        
        .metrics-container {
            margin-top: 30px;
            padding: 20px;
            border: 1px solid #555555;
            border-radius: 5px;
        }
        
        .metrics-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .metrics-table th, .metrics-table td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #555555;
        }
        
        .metrics-table th {
            background-color: rgba(0, 0, 0, 0.1);
        }
        
        @media print {
            body {
                background-color: white;
                color: black;
            }
            
            .metrics-container {
                border: 1px solid #ccc;
            }
            
            .metrics-table th, .metrics-table td {
                border-bottom: 1px solid #ccc;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Q-Q Plot: Normale standard vs. Exponentielle</h1>
        
        <div class="chart-container">
            <canvas id="qqPlotChart"></canvas>
        </div>
        
                <div class="metrics-container">
            <h3>MÃ©triques de comparaison</h3>
            <table class="metrics-table">
                <tr>
                    <th>MÃ©trique</th>
                    <th>Valeur</th>
                </tr>
                <tr>
                    <td>DÃ©viation moyenne</td>
                    <td>1.0311</td>
                </tr>
                <tr>
                    <td>DÃ©viation maximale</td>
                    <td>2.5585</td>
                </tr>
                <tr>
                    <td>DÃ©viation minimale</td>
                    <td>0.6374</td>
                </tr>
                <tr>
                    <td>Somme des carrÃ©s des dÃ©viations</td>
                    <td>120.8708</td>
                </tr>
            </table>
        </div>
    </div>
    
    <script>
        // DonnÃ©es du graphique Q-Q
        const referenceQuantiles = [
    -2.5498645799096238,
    -2.0411933284698121,
    -1.9665665857033565,
    -1.9466452039987627,
    -1.7743652580875431,
    -1.66846044384054,
    -1.599218412048987,
    -1.4746811706894638,
    -1.4131579655864341,
    -1.3600841735190694,
    -1.3533670790130161,
    -1.3298756441599469,
    -1.2740380931037543,
    -1.2495559116266932,
    -1.19422694619123,
    -1.1175260096642532,
    -0.97675237445117913,
    -0.91105857378699184,
    -0.89580483142605871,
    -0.83961664421442939,
    -0.80233441682436346,
    -0.74025027208280358,
    -0.70931487055634856,
    -0.70387565917997386,
    -0.67877680446800359,
    -0.64723754592670324,
    -0.64058092418003487,
    -0.61125235160104674,
    -0.57648146654776078,
    -0.54579540873428234,
    -0.52440998636103886,
    -0.50676254184103375,
    -0.47691574980295304,
    -0.439315622298111,
    -0.42451818352931892,
    -0.3982767523966298,
    -0.39033915602673736,
    -0.38040952028857139,
    -0.37260014564956095,
    -0.34704837921537296,
    -0.30597103385051239,
    -0.27046343123468441,
    -0.26139214732011118,
    -0.259290264183705,
    -0.23132063880284975,
    -0.19213141801357572,
    -0.18149181626212027,
    -0.17345065555872125,
    -0.1571109478099722,
    -0.12345265592667803,
    -0.090607332040930716,
    -0.056346831227283463,
    -0.041516005432397758,
    -0.039427647808054023,
    -0.03464926426522013,
    -0.010862381097835001,
    0.088938853668277112,
    0.10553007885828651,
    0.11519526748598735,
    0.130151433962217,
    0.13643752992729796,
    0.17928374971984914,
    0.20283988889165158,
    0.22051991777317317,
    0.29801764960777477,
    0.32716509285380413,
    0.336921256116125,
    0.37143441481417244,
    0.38213338711647549,
    0.38992030289938417,
    0.39722355906352108,
    0.43736063169462236,
    0.474814529379358,
    0.48778089823743259,
    0.50284046658314607,
    0.50949173023776073,
    0.53729981944856531,
    0.57057507379559513,
    0.60334475431963164,
    0.686801070246855,
    0.70999999423134119,
    0.72802299859598285,
    0.74081922058914829,
    0.75795880362981394,
    0.7784102963440942,
    0.86173083219775437,
    0.89803254245161,
    0.9374515879490557,
    0.95875608993011219,
    0.98945712159666444,
    1.05595226125722,
    1.1613544260056163,
    1.2851922764764556,
    1.42322167273238,
    1.4722744588889132,
    1.5010186682862579,
    1.6308575804977978,
    1.79063800409248,
    2.1752082033744617,
    2.2656491469328905
];
        const comparisonQuantiles = [
    0.00862396560058805,
    0.023917508890819991,
    0.026947729258357637,
    0.033437169015354949,
    0.048441696533015575,
    0.053930110081594491,
    0.057872351668039487,
    0.0637870836959536,
    0.10290021370274123,
    0.11102886631167656,
    0.12226679559229973,
    0.13947520817202566,
    0.14365360616378331,
    0.16424259391907134,
    0.17746414889768142,
    0.21253293586814093,
    0.22167982531733874,
    0.24386371322217695,
    0.254054716229959,
    0.25575988937875543,
    0.26823571390362222,
    0.29599545007428213,
    0.29962814222537459,
    0.335899892054083,
    0.33908286978236674,
    0.34136715649687327,
    0.34946277052197633,
    0.36748954143337126,
    0.37011831391754269,
    0.393636047506483,
    0.41580006772876987,
    0.42100264817551958,
    0.42481959835194988,
    0.42876751494475013,
    0.4382205791059286,
    0.46328989318632846,
    0.47555288415718527,
    0.48374822452635369,
    0.49196248165096712,
    0.49728984849247332,
    0.50385064857409112,
    0.55239808797162,
    0.56374033028489623,
    0.57940801287354859,
    0.59097417017056486,
    0.62447862784539787,
    0.645527739421614,
    0.64727188362001509,
    0.678254054467399,
    0.68232724422168267,
    0.69280419928708248,
    0.6976826558844561,
    0.72806417314519345,
    0.735441801461106,
    0.749282923766201,
    0.792876107640024,
    0.80923808037641665,
    0.82101968074468934,
    0.84380302036666244,
    0.87058679525140292,
    0.8945973885423365,
    0.90870210946945285,
    0.930460109340961,
    0.93448434918369627,
    0.952557554748709,
    0.96451617003072676,
    1.008719602989089,
    1.0325472347091198,
    1.0573390567666821,
    1.0801822520656461,
    1.0861145797712282,
    1.089175601827888,
    1.160707153492327,
    1.2143627419917777,
    1.2414503211449306,
    1.2967911447533635,
    1.3155591850677804,
    1.3525564192925887,
    1.4525686620128131,
    1.4673016080527224,
    1.5221385420903348,
    1.5582486297190519,
    1.582730888723739,
    1.6994745700595408,
    1.7370903958479629,
    1.8598298581907688,
    1.86448714815867,
    1.8774533246836844,
    1.9330315761367627,
    2.0472163152257274,
    2.07569268712394,
    2.2027846942672693,
    2.4850132374207328,
    2.5510981507838486,
    2.587943885272086,
    2.8187456286924513,
    2.9246989391349847,
    3.3425040192781172,
    3.4186802920937986,
    4.7345524501544238
];
        const lowerBand = [
    -2.6284218074122379,
    -2.1517331458477007,
    -2.1012641717957528,
    -2.101384996594081,
    -1.9464755203205306,
    -1.8560132538955094,
    -1.8007295680509938,
    -1.6889567191478845,
    -1.639206302411085,
    -1.5970615263090919,
    -1.6005416248903874,
    -1.5866027790018733,
    -1.5397427461280224,
    -1.5237195101467937,
    -1.4763775621898081,
    -1.4072307502250614,
    -1.2736113957703492,
    -1.2147002962394371,
    -1.2058820604019096,
    -1.155803385689999,
    -1.1243232338361924,
    -1.0677500679858813,
    -1.0420490130674231,
    -1.0415803794738199,
    -1.0211998204366317,
    -0.994136869739103,
    -0.99172382258194047,
    -0.96641443371965319,
    -0.93544587883914465,
    -0.90835212050323522,
    -0.89035515226144324,
    -0.87589793012448669,
    -0.84904822696749549,
    -0.81425668630444759,
    -0.80208353897911522,
    -0.77828592206731051,
    -0.77261512397634768,
    -0.7647784024187001,
    -0.75889088417206318,
    -0.7350924579315643,
    -0.6956022115368945,
    -0.66151749075075528,
    -0.653706658322269,
    -0.65270435755336043,
    -0.62567479108353208,
    -0.58726724430664334,
    -0.57725187015808532,
    -0.56967823478474,
    -0.55364990435652239,
    -0.52014720948001947,
    -0.48730188559427212,
    -0.4528857877738337,
    -0.43774358465841645,
    -0.43518770170401905,
    -0.42978509055828779,
    -0.40521653337851726,
    -0.30447523970137824,
    -0.28678443214387139,
    -0.27585879203008351,
    -0.25947974372416516,
    -0.25160654878889332,
    -0.20700698880265314,
    -0.18152899323847713,
    -0.16175605017643715,
    -0.081991520062905943,
    -0.050400262595992118,
    -0.038019807890211532,
    -0.00069806235036995457,
    0.01299799883302255,
    0.023975136998979629,
    0.034666847294568148,
    0.078396219403238432,
    0.11965244726075153,
    0.13663799983552705,
    0.15594114277074633,
    0.1670687142691325,
    0.19959509915471929,
    0.23784093128452044,
    0.27584495841655388,
    0.36481225323502603,
    0.39381325275577173,
    0.41794576962013208,
    0.437177498136703,
    0.4610997823106438,
    0.48870555578328589,
    0.57958021619917632,
    0.62386894393150949,
    0.67174693492478754,
    0.70202895508818575,
    0.74228257571929324,
    0.81897490846719778,
    0.93530608918096547,
    1.0709167280180349,
    1.2217105167303732,
    1.2847216488339437,
    1.3289084060532703,
    1.4761177879024796,
    1.6559404180000838,
    2.0646683859965731,
    2.1870919194302765
];
        const upperBand = [
    -2.4713073524070097,
    -1.9306535110919236,
    -1.8318689996109603,
    -1.7919054114034445,
    -1.6022549958545556,
    -1.4809076337855704,
    -1.39770725604698,
    -1.2604056222310431,
    -1.1871096287617833,
    -1.1231068207290469,
    -1.1061925331356448,
    -1.0731485093180204,
    -1.0083334400794861,
    -0.97539231310659269,
    -0.912076330192652,
    -0.82782126910344489,
    -0.679893353132009,
    -0.60741685133454659,
    -0.58572760245020783,
    -0.52342990273885981,
    -0.4803455998125345,
    -0.41275047617972582,
    -0.37658072804527387,
    -0.36617093888612784,
    -0.33635378849937536,
    -0.3003382221143035,
    -0.28943802577812933,
    -0.25609026948244029,
    -0.21751705425637696,
    -0.18323869696532952,
    -0.15846482046063443,
    -0.13762715355758076,
    -0.10478327263841064,
    -0.064374558291774464,
    -0.046952828079522668,
    -0.018267582725949083,
    -0.0080631880771270259,
    0.0039593618415573184,
    0.013690592872941332,
    0.040995699500818328,
    0.083660143835869782,
    0.12059062828138645,
    0.13092236368204674,
    0.13412382918595039,
    0.16303351347783263,
    0.20300440827949193,
    0.21426823763384481,
    0.22277692366729746,
    0.23942800873657805,
    0.27324189762666334,
    0.30608722151241063,
    0.34019212531926679,
    0.35471157379362095,
    0.356332406087911,
    0.36048656202784751,
    0.38349177118284727,
    0.48235294703793252,
    0.49784458986044444,
    0.50624932700205827,
    0.51978261164859918,
    0.52448160864348925,
    0.56557448824235146,
    0.58720877102178026,
    0.60279588572278353,
    0.67802681927845554,
    0.70473044830360032,
    0.71186232012246153,
    0.74356689197871484,
    0.75126877539992842,
    0.75586546879978878,
    0.759780270832474,
    0.79632504398600634,
    0.82997661149796442,
    0.83892379663933814,
    0.84973979039554581,
    0.851914746206389,
    0.87500453974241132,
    0.90330921630666983,
    0.9308445502227094,
    1.008789887258684,
    1.0261867357069105,
    1.0381002275718336,
    1.0444609430415936,
    1.0548178249489841,
    1.0681150369049024,
    1.1438814481963324,
    1.1721961409717105,
    1.2031562409733239,
    1.2154832247720386,
    1.2366316674740356,
    1.2929296140472424,
    1.3874027628302672,
    1.4994678249348763,
    1.624732828734387,
    1.6598272689438827,
    1.6731289305192454,
    1.7855973730931161,
    1.9253355901848763,
    2.2857480207523504,
    2.3442063744355046
];
        
        // CrÃ©er le graphique
        const ctx = document.getElementById('qqPlotChart').getContext('2d');
        
        // PrÃ©parer les donnÃ©es pour le graphique
        const data = {
            datasets: [
                {
                    label: 'Points Q-Q',
                    data: referenceQuantiles.map((x, i) => ({ x, y: comparisonQuantiles[i] })),
                    backgroundColor: '#1f77b4',
                    borderColor: '#1f77b4',
                    pointRadius: 3,
                    pointHoverRadius: 5,
                    showLine: false
                }
            ]
        };
        
        // Ajouter la diagonale si demandÃ©
        if (true) {
            data.datasets.push({
                label: 'Diagonale',
                data: [
                    { x: -3.3647192331689, y: -3.3647192331689 },
                    { x: 5.47084987591109, y: 5.47084987591109 }
                ],
                backgroundColor: '#ff7f0e',
                borderColor: '#ff7f0e',
                pointRadius: 0,
                borderWidth: 2,
                borderDash: [5, 5],
                fill: false
            });
        }
        
        // Ajouter les bandes de confiance si demandÃ© et disponibles
        if (true && lowerBand !== null && upperBand !== null) {
            // Bande de confiance infÃ©rieure
            data.datasets.push({
                label: 'Bande de confiance infÃ©rieure',
                data: referenceQuantiles.map((x, i) => ({ x, y: lowerBand[i] })),
                backgroundColor: 'transparent',
                borderColor: 'rgba(31, 119, 180, 0.5)',
                pointRadius: 0,
                borderWidth: 1,
                borderDash: [3, 3],
                fill: false
            });
            
            // Bande de confiance supÃ©rieure
            data.datasets.push({
                label: 'Bande de confiance supÃ©rieure',
                data: referenceQuantiles.map((x, i) => ({ x, y: upperBand[i] })),
                backgroundColor: 'transparent',
                borderColor: 'rgba(31, 119, 180, 0.5)',
                pointRadius: 0,
                borderWidth: 1,
                borderDash: [3, 3],
                fill: '+1'
            });
            
            // Zone entre les bandes de confiance
            data.datasets.push({
                label: 'Zone de confiance',
                data: referenceQuantiles.map((x, i) => ({ x, y: lowerBand[i] })),
                backgroundColor: 'rgba(31, 119, 180, 0.2)',
                borderColor: 'transparent',
                pointRadius: 0,
                fill: '+1'
            });
        }
        
        // Configuration du graphique
        const config = {
            type: 'scatter',
            data: data,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Quantiles de rÃ©fÃ©rence',
                            color: '#ffffff'
                        },
                        min: -3.3647192331689,
                        max: 5.47084987591109,
                        grid: {
                            color: '#555555'
                        },
                        ticks: {
                            color: '#ffffff'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Quantiles de comparaison',
                            color: '#ffffff'
                        },
                        min: -3.3647192331689,
                        max: 5.47084987591109,
                        grid: {
                            color: '#555555'
                        },
                        ticks: {
                            color: '#ffffff'
                        }
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: 'Q-Q Plot: Normale standard vs. Exponentielle',
                        color: '#ffffff',
                        font: {
                            size: 16
                        }
                    },
                    legend: {
                        display: true,
                        labels: {
                            color: '#ffffff'
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const index = context.dataIndex;
                                const probability = (index / referenceQuantiles.length).toFixed(2);
                                return [
                                    ProbabilitÃ©: ,
                                    RÃ©fÃ©rence: ,
                                    Comparaison: ,
                                    DÃ©viation: 
                                ];
                            }
                        }
                    }
                }
            }
        };
        
        // CrÃ©er le graphique
        const qqPlotChart = new Chart(ctx, config);
    </script>
</body>
</html>
