

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nœuds de Traitement de Données et de Logique dans n8n &mdash; EMAIL_SENDER_1 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=8d563738"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            EMAIL_SENDER_1
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contenu:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Documentation des API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">EMAIL_SENDER_1</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Nœuds de Traitement de Données et de Logique dans n8n</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/n8n/N8N_DATA_PROCESSING_LOGIC_NODES-restructured.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="noeuds-de-traitement-de-donnees-et-de-logique-dans-n8n">
<h1>Nœuds de Traitement de Données et de Logique dans n8n<a class="headerlink" href="#noeuds-de-traitement-de-donnees-et-de-logique-dans-n8n" title="Link to this heading"></a></h1>
<section id="table-des-matieres">
<h2>Table des matières<a class="headerlink" href="#table-des-matieres" title="Link to this heading"></a></h2>
<ol class="simple">
<li><p><a class="reference external" href="#section-1">Nœuds de Traitement de Données et de Logique dans n8n</a>
1.1. <a class="reference external" href="#section-2">Nœud Code (Function)</a>
1.1.1. <a class="reference external" href="#section-3">Exemple : Ajouter un nouveau champ à chaque élément</a>
1.2. <a class="reference external" href="#section-4">Nœud IF (Conditionnel)</a>
1.2.1. <a class="reference external" href="#section-5">Exemple : Vérifier si le champ status est égal à “success”</a>
1.3. <a class="reference external" href="#section-6">Nœud Switch (Routage Multiple)</a>
1.3.1. <a class="reference external" href="#section-7">Exemple : Routage basé sur un champ category</a>
1.4. <a class="reference external" href="#section-8">Nœud Set (Éditer les Champs)</a>
1.4.1. <a class="reference external" href="#section-9">Exemple : Définir deux nouveaux champs et conserver les données existantes</a>
1.5. <a class="reference external" href="#section-10">Nœud Merge (Fusion)</a>
1.5.1. <a class="reference external" href="#section-11">Exemple : Utilisation de Merge en mode “By Key” pour joindre des données de deux sources sur un champ id</a>
1.6. <a class="reference external" href="#section-12">Nœud Item Lists (Aggregate)</a>
1.6.1. <a class="reference external" href="#section-13">Exemple : Configuration pour diviser un tableau</a>
1.7. <a class="reference external" href="#section-14">Boucles (Split/Batches)</a>
1.7.1. <a class="reference external" href="#section-15">Exemple : Traiter 10 éléments à la fois</a>
1.8. <a class="reference external" href="#section-16">Gestion des Erreurs (Try/Catch)</a>
1.8.1. <a class="reference external" href="#section-17">Exemple : Nœud Stop And Error pour arrêter délibérément l’exécution</a></p></li>
</ol>
</section>
<section id="noeuds-de-traitement-de-donnees-et-de-logique-dans-n8n-a-name-section-1-a">
<h2>1. Nœuds de Traitement de Données et de Logique dans n8n <a name='section-1'></a><a class="headerlink" href="#noeuds-de-traitement-de-donnees-et-de-logique-dans-n8n-a-name-section-1-a" title="Link to this heading"></a></h2>
<p>Ce document détaille les nœuds essentiels pour le traitement des données et la logique conditionnelle dans les workflows n8n, avec des exemples de configuration JSON.</p>
<section id="noeud-code-function-a-name-section-2-a">
<h3>1.1. Nœud Code (Function) <a name='section-2'></a><a class="headerlink" href="#noeud-code-function-a-name-section-2-a" title="Link to this heading"></a></h3>
<p>Le nœud Code (anciennement appelé Function) permet d’écrire du JavaScript personnalisé (et dans les versions récentes, optionnellement du Python) pour manipuler des données. Il peut opérer sur des éléments entrants ou générer de nouvelles données.</p>
<section id="exemple-ajouter-un-nouveau-champ-a-chaque-element-a-name-section-3-a">
<h4>1.1.1. Exemple : Ajouter un nouveau champ à chaque élément <a name='section-3'></a><a class="headerlink" href="#exemple-ajouter-un-nouveau-champ-a-chaque-element-a-name-section-3-a" title="Link to this heading"></a></h4>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Add Field&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;n8n-nodes-base.function&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;typeVersion&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;functionCode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;for (const item of items) {\n item.json.newField = item.json.someField + 100;\n}\nreturn items;&quot;</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p><strong>Explication :</strong> Ce code JavaScript parcourt chaque élément d’entrée (<code class="docutils literal notranslate"><span class="pre">items</span></code> est un tableau d’objets <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">json:</span> <span class="pre">{...},</span> <span class="pre">binary:</span> <span class="pre">{...}</span> <span class="pre">}</span></code>) et ajoute un nouveau champ. Ici, nous définissons <code class="docutils literal notranslate"><span class="pre">newField</span></code> comme <code class="docutils literal notranslate"><span class="pre">someField</span> <span class="pre">+</span> <span class="pre">100</span></code>. Le nœud doit retourner <code class="docutils literal notranslate"><span class="pre">items;</span></code> à la fin. Après l’exécution, les nœuds en aval voient les éléments modifiés.</p>
<p>Vous pouvez utiliser <code class="docutils literal notranslate"><span class="pre">console.log()</span></code> ou effectuer des transformations plus complexes. Si vous configurez “Pas d’entrées”, le nœud Code peut agir comme un générateur de données (par exemple, créer un tableau d’objets à partir de zéro).</p>
<p><strong>Note :</strong> n8n prend également en charge un mode Code (Python) séparé si activé. Dans le JSON, cela inclurait <code class="docutils literal notranslate"><span class="pre">&quot;language&quot;:</span> <span class="pre">&quot;python&quot;</span></code> et le code dans un champ similaire.</p>
</section>
</section>
<section id="noeud-if-conditionnel-a-name-section-4-a">
<h3>1.2. Nœud IF (Conditionnel) <a name='section-4'></a><a class="headerlink" href="#noeud-if-conditionnel-a-name-section-4-a" title="Link to this heading"></a></h3>
<p>Le nœud IF achemine les données en fonction de conditions (vrai/faux). Il possède deux sorties : vrai (première sortie) et faux (deuxième sortie).</p>
<section id="exemple-verifier-si-le-champ-status-est-egal-a-success-a-name-section-5-a">
<h4>1.2.1. Exemple : Vérifier si le champ status est égal à “success” <a name='section-5'></a><a class="headerlink" href="#exemple-verifier-si-le-champ-status-est-egal-a-success-a-name-section-5-a" title="Link to this heading"></a></h4>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Check Status&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;n8n-nodes-base.if&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;typeVersion&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;conditions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;conditions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="nt">&quot;leftValue&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;={{ $json[\&quot;status\&quot;] }}&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;rightValue&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;operator&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;operation&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;equals&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;combinator&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;and&quot;</span>
</pre></div>
</div>
<p><strong>Explication :</strong> Ce nœud IF dirigera tout élément entrant vers la branche vrai si le champ <code class="docutils literal notranslate"><span class="pre">status</span></code> de l’élément est la chaîne “success”. Tous les autres éléments vont vers la branche faux.</p>
<p>La structure JSON sous <code class="docutils literal notranslate"><span class="pre">parameters.conditions</span></code> peut inclure plusieurs règles ; ici, nous avons une règle comparant une chaîne. <code class="docutils literal notranslate"><span class="pre">leftValue</span></code> utilise une expression pour extraire le statut de l’élément. Nous définissons le type d’opérateur sur “string” et l’opération “equals”.</p>
<p>Le nœud IF prend en charge d’autres opérations (par exemple, contains, greater, less, regex matches, etc.) et types de données (number, boolean, date, etc.). Le combinateur est utilisé si vous avez plusieurs conditions – par exemple, vous pourriez définir deux conditions et utiliser <code class="docutils literal notranslate"><span class="pre">&quot;combinator&quot;:</span> <span class="pre">&quot;and&quot;</span></code> pour exiger que les deux soient vraies.</p>
<p><strong>Important :</strong> Le nœud IF ne filtre pas complètement les éléments ; il les achemine. Les éléments vont donc toujours soit vers la sortie vrai, soit vers la sortie faux. Si vous voulez arrêter des éléments, vous pourriez utiliser une logique supplémentaire (ou utiliser le IF en combinaison avec le nœud Merge pour filtrer).</p>
</section>
</section>
<section id="noeud-switch-routage-multiple-a-name-section-6-a">
<h3>1.3. Nœud Switch (Routage Multiple) <a name='section-6'></a><a class="headerlink" href="#noeud-switch-routage-multiple-a-name-section-6-a" title="Link to this heading"></a></h3>
<p>Le nœud Switch est comme un multi-IF ou une instruction switch/case. Il vous permet de définir plusieurs règles et jusqu’à plusieurs sorties. Chaque élément entrant va vers la première sortie correspondante (ou toutes les correspondantes, si configuré), ou vers une sortie par défaut si aucune règle ne correspond.</p>
<section id="exemple-routage-base-sur-un-champ-category-a-name-section-7-a">
<h4>1.3.1. Exemple : Routage basé sur un champ category <a name='section-7'></a><a class="headerlink" href="#exemple-routage-base-sur-un-champ-category-a-name-section-7-a" title="Link to this heading"></a></h4>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Route by Category&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;n8n-nodes-base.switch&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;typeVersion&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;dataType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;value1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;={{ $json[\&quot;category\&quot;] }}&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;rules&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;rules&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;operation&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;equal&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;value2&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;support&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;operation&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;equal&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;value2&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sales&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;fallbackOutput&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p><strong>Explication :</strong> Ce nœud Switch examine la valeur de <code class="docutils literal notranslate"><span class="pre">category</span></code>. Si elle est égale à “support”, l’élément sort via la sortie 0 (première sortie) ; si “sales”, via la sortie 1 ; tout le reste passe par la sortie 2 (la sortie par défaut).</p>
<p>Nous définissons <code class="docutils literal notranslate"><span class="pre">dataType:</span> <span class="pre">&quot;string&quot;</span></code> puisque nous comparons des chaînes. Le tableau <code class="docutils literal notranslate"><span class="pre">rules</span></code> définit deux cas. <code class="docutils literal notranslate"><span class="pre">fallbackOutput:</span> <span class="pre">2</span></code> signifie que nous avons configuré une troisième sortie pour “aucune des options ci-dessus”. Dans l’éditeur, vous définiriez le nombre de sorties à 3 dans ce cas.</p>
<p>Vous pouvez ajouter plus de règles pour des sorties supplémentaires. Les opérations peuvent être l’égalité, contient, supérieur à, etc., similaires à IF. Vous pouvez également basculer sur des nombres, des booléens, des dates, ou même utiliser un mode d’expression JavaScript pour diriger les éléments vers un index de sortie.</p>
<p>Le nœud Switch est utile pour la logique de branchement dans les workflows (par exemple, traiter différemment différents types d’événements ou catégories).</p>
</section>
</section>
<section id="noeud-set-editer-les-champs-a-name-section-8-a">
<h3>1.4. Nœud Set (Éditer les Champs) <a name='section-8'></a><a class="headerlink" href="#noeud-set-editer-les-champs-a-name-section-8-a" title="Link to this heading"></a></h3>
<p>Le nœud Set permet d’ajouter, supprimer ou renommer des champs dans les données JSON sans coder. Il est souvent utilisé pour préparer ou nettoyer des données.</p>
<section id="exemple-definir-deux-nouveaux-champs-et-conserver-les-donnees-existantes-a-name-section-9-a">
<h4>1.4.1. Exemple : Définir deux nouveaux champs et conserver les données existantes <a name='section-9'></a><a class="headerlink" href="#exemple-definir-deux-nouveaux-champs-et-conserver-les-donnees-existantes-a-name-section-9-a" title="Link to this heading"></a></h4>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Set Fields&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;n8n-nodes-base.set&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;typeVersion&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;keepOnlySet&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;values&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;number&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;year&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2025</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;string&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;statusMessage&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Processed by n8n&quot;</span>
<span class="w">      </span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Explication :</strong> Ce nœud Set ajoutera un champ numérique <code class="docutils literal notranslate"><span class="pre">year</span></code> avec la valeur 2025 et un champ chaîne <code class="docutils literal notranslate"><span class="pre">statusMessage</span></code> avec un texte statique. Comme <code class="docutils literal notranslate"><span class="pre">keepOnlySet</span></code> est false, il conservera tous les champs existants des éléments d’entrée et ajoutera simplement ces deux-là.</p>
<p>Si <code class="docutils literal notranslate"><span class="pre">keepOnlySet</span></code> était true, la sortie n’aurait que les champs que nous définissons explicitement (utile si vous voulez écarter d’autres données).</p>
<p>Le nœud Set peut gérer plusieurs types de données (notez que nous avons utilisé un nombre et une chaîne ; vous pourriez également définir des booléens, des dates, etc. en utilisant les sections respectives).</p>
<p>Si vous voulez supprimer certains champs, vous pouvez utiliser l’option Remove Fields (dans le JSON, il y aurait un <code class="docutils literal notranslate"><span class="pre">options.removeFields</span></code> que vous pourriez lister).</p>
<p>Le nœud Set est pratique pour mapper des données avant de les envoyer à une API ou après avoir reçu des données pour simplifier la sortie.</p>
</section>
</section>
<section id="noeud-merge-fusion-a-name-section-10-a">
<h3>1.5. Nœud Merge (Fusion) <a name='section-10'></a><a class="headerlink" href="#noeud-merge-fusion-a-name-section-10-a" title="Link to this heading"></a></h3>
<p>Le nœud Merge prend deux flux d’entrée et les combine. Il peut fonctionner dans différents modes : Append (concatène simplement les éléments), Wait (attend les deux entrées puis sort ensemble), Merge By Index (apparie les éléments un à un par leur index), ou Merge By Key (fait correspondre les éléments des deux entrées sur une valeur clé).</p>
<section id="exemple-utilisation-de-merge-en-mode-by-key-pour-joindre-des-donnees-de-deux-sources-sur-un-champ-id-a-name-section-11-a">
<h4>1.5.1. Exemple : Utilisation de Merge en mode “By Key” pour joindre des données de deux sources sur un champ id <a name='section-11'></a><a class="headerlink" href="#exemple-utilisation-de-merge-en-mode-by-key-pour-joindre-des-donnees-de-deux-sources-sur-un-champ-id-a-name-section-11-a" title="Link to this heading"></a></h4>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Merge on ID&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;n8n-nodes-base.merge&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;typeVersion&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;mode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mergeByKey&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;propertyName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;id&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;outputDataFrom&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;both&quot;</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p><strong>Explication :</strong> Ce Merge est configuré pour <code class="docutils literal notranslate"><span class="pre">mergeByKey</span></code> sur le champ <code class="docutils literal notranslate"><span class="pre">id</span></code>. Il s’attend à ce que chaque entrée ait des éléments avec une propriété <code class="docutils literal notranslate"><span class="pre">id</span></code>. Il produira un flux unique d’éléments fusionnés : chaque élément de sortie combine le JSON de input1 et input2 où l’id correspondait.</p>
<p>Le <code class="docutils literal notranslate"><span class="pre">outputDataFrom:</span> <span class="pre">&quot;both&quot;</span></code> signifie que l’élément de sortie inclura les champs des deux entrées (vous pourriez également choisir de ne sortir que les données d’un côté, l’autre étant juste utilisé pour la correspondance).</p>
<p>Pour utiliser Merge, connectez un nœud à l’entrée 1 et un autre à l’entrée 2 de ce nœud. Si un id d’un côté ne trouve pas de correspondance de l’autre côté, cet élément peut être supprimé ou transmis en fonction d’options supplémentaires (<code class="docutils literal notranslate"><span class="pre">options.outputMissing...</span></code>).</p>
<p><strong>Autres modes :</strong></p>
<ul class="simple">
<li><p><strong>Append</strong> concatène simplement les éléments Input1 et Input2 (l’un après l’autre)</p></li>
<li><p><strong>Wait</strong> fait une pause jusqu’à ce que les deux entrées aient été exécutées (puis sort les deux ensembles ; utile pour synchroniser des branches parallèles)</p></li>
<li><p><strong>Merge By Index</strong> prend l’élément 0 de Input1 avec l’élément 0 de Input2, l’élément 1 avec l’élément 1, etc., combinant leur JSON (vous n’utiliseriez généralement cela que si les deux entrées ont la même longueur et le même ordre)</p></li>
</ul>
<p>Le nœud Merge est crucial pour des flux plus complexes où les données se divisent et doivent se rejoindre.</p>
</section>
</section>
<section id="noeud-item-lists-aggregate-a-name-section-12-a">
<h3>1.6. Nœud Item Lists (Aggregate) <a name='section-12'></a><a class="headerlink" href="#noeud-item-lists-aggregate-a-name-section-12-a" title="Link to this heading"></a></h3>
<p>Le nœud Item Lists (précédemment appelé Aggregate dans certains contextes) aide à manipuler des tableaux d’éléments – par exemple, diviser un tableau en éléments individuels ou agréger plusieurs éléments en un seul tableau.</p>
<section id="exemple-configuration-pour-diviser-un-tableau-a-name-section-13-a">
<h4>1.6.1. Exemple : Configuration pour diviser un tableau <a name='section-13'></a><a class="headerlink" href="#exemple-configuration-pour-diviser-un-tableau-a-name-section-13-a" title="Link to this heading"></a></h4>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Split Array&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;n8n-nodes-base.itemLists&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;typeVersion&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;operation&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;splitIntoItems&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;property&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;results&quot;</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p><strong>Explication :</strong> Si un élément entrant a un champ <code class="docutils literal notranslate"><span class="pre">results</span></code> qui est un tableau (par exemple, d’une réponse HTTP ou d’un calcul précédent), ce nœud produira chaque élément de <code class="docutils literal notranslate"><span class="pre">results</span></code> comme un élément n8n séparé. L’opération <code class="docutils literal notranslate"><span class="pre">&quot;splitIntoItems&quot;</span></code> et la spécification de la propriété à diviser font cela.</p>
<p>L’inverse peut être fait avec <code class="docutils literal notranslate"><span class="pre">operation:</span> <span class="pre">&quot;aggregateItems&quot;</span></code> qui peut collecter toutes les données des éléments d’entrée dans un seul tableau sur un élément (vous spécifiez comment agréger, comme collecter toutes les valeurs d’un champ dans un tableau).</p>
<p>Il existe également d’autres opérations de liste (comme supprimer les doublons, trier les éléments par un champ, etc.).</p>
<p>Le nœud Item Lists est très utile pour gérer les données de tableau sans écrire de code – par exemple, diviser une réponse API qui a retourné une liste d’enregistrements en éléments individuels pour un traitement ultérieur.</p>
</section>
</section>
<section id="boucles-split-batches-a-name-section-14-a">
<h3>1.7. Boucles (Split/Batches) <a name='section-14'></a><a class="headerlink" href="#boucles-split-batches-a-name-section-14-a" title="Link to this heading"></a></h3>
<p>n8n n’utilise pas de boucles traditionnelles ; à la place, il traite plusieurs éléments en parallèle à travers les nœuds. Pour boucler explicitement d’une certaine manière, vous pouvez utiliser le nœud Split In Batches (appelé “Loop Over Items” dans l’interface).</p>
<section id="exemple-traiter-10-elements-a-la-fois-a-name-section-15-a">
<h4>1.7.1. Exemple : Traiter 10 éléments à la fois <a name='section-15'></a><a class="headerlink" href="#exemple-traiter-10-elements-a-la-fois-a-name-section-15-a" title="Link to this heading"></a></h4>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Batch Loop&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;n8n-nodes-base.splitInBatches&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;typeVersion&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;batchSize&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p><strong>Explication :</strong> Connectez le nœud SplitInBatches dans votre flux où vous voulez limiter ou parcourir des éléments. Lors de la première exécution, il passera les 10 premiers éléments et retiendra le reste.</p>
<p>À la fin de la boucle (vous devez connecter le dernier nœud de la boucle à l’entrée 2 du nœud SplitInBatches), le nœud SplitInBatches enverra le prochain lot lorsqu’il sera déclenché depuis cette deuxième entrée. Cela crée essentiellement une boucle : après le dernier nœud, connectez-le à nouveau au SplitInBatches (sélectionnez l’entrée “Execute Next Batch”).</p>
<p>C’est une utilisation avancée pour les scénarios où vous devez éviter de traiter tous les éléments à la fois (par exemple, limiter les appels API ou traiter de grandes listes morceau par morceau).</p>
<p>La boucle se termine lorsqu’il ne reste plus d’éléments ; vous pouvez détecter cela en utilisant un Run IF connecté à la sortie “No Items” de SplitInBatches (ou simplement laisser le workflow se terminer après qu’il n’y a plus de lots).</p>
</section>
</section>
<section id="gestion-des-erreurs-try-catch-a-name-section-16-a">
<h3>1.8. Gestion des Erreurs (Try/Catch) <a name='section-16'></a><a class="headerlink" href="#gestion-des-erreurs-try-catch-a-name-section-16-a" title="Link to this heading"></a></h3>
<p>Pour l’automatisation, vous pourriez vouloir gérer les erreurs avec élégance. n8n a un nœud Error Trigger qui peut capturer les erreurs de workflow globalement, et une option Continue On Fail par nœud.</p>
<p>Dans le JSON du workflow, vous pouvez définir <code class="docutils literal notranslate"><span class="pre">&quot;continueOnFail&quot;:</span> <span class="pre">true</span></code> sur les paramètres de n’importe quel nœud pour empêcher qu’une défaillance du nœud n’arrête le workflow.</p>
<section id="exemple-noeud-stop-and-error-pour-arreter-deliberement-l-execution-a-name-section-17-a">
<h4>1.8.1. Exemple : Nœud Stop And Error pour arrêter délibérément l’exécution <a name='section-17'></a><a class="headerlink" href="#exemple-noeud-stop-and-error-pour-arreter-deliberement-l-execution-a-name-section-17-a" title="Link to this heading"></a></h4>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Stop on Condition&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;n8n-nodes-base.stopAndError&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;typeVersion&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Terminating workflow due to business rule X&quot;</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p><strong>Explication :</strong> Si ce nœud s’exécute, il arrêtera le workflow et produira une erreur avec le message donné. Utilisez-le après un IF ou une autre vérification si vous voulez arrêter gracieusement lorsque quelque chose ne va pas (au lieu de continuer).</p>
<p>Pour capturer les erreurs, l’Error Trigger est placé dans un workflow séparé ; lorsqu’un workflow génère une erreur, il peut capturer les détails et, par exemple, envoyer une alerte par email ou Slack.</p>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, EMAIL_SENDER_1 Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>