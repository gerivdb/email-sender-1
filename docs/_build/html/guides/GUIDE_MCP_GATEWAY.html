

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Guide d’utilisation du MCP Gateway dans n8n &mdash; EMAIL_SENDER_1 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=8d563738"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            EMAIL_SENDER_1
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contenu:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Documentation des API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">EMAIL_SENDER_1</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Guide d’utilisation du MCP Gateway dans n8n</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/guides/GUIDE_MCP_GATEWAY.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="guide-d-utilisation-du-mcp-gateway-dans-n8n">
<h1>Guide d’utilisation du MCP Gateway dans n8n<a class="headerlink" href="#guide-d-utilisation-du-mcp-gateway-dans-n8n" title="Link to this heading"></a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<p>Le MCP Gateway (centralmind/gateway) est un serveur MCP (Model Context Protocol) qui permet d’exposer votre base de données aux agents IA via le protocole MCP ou OpenAPI 3.1. Ce guide vous explique comment configurer et utiliser le MCP Gateway dans vos workflows n8n.</p>
</section>
<section id="prerequis">
<h2>Prérequis<a class="headerlink" href="#prerequis" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>n8n version 1.0.0 ou ultérieure</p></li>
<li><p>Node.js 16 ou ultérieur</p></li>
<li><p>Une base de données supportée (PostgreSQL, MySQL, ClickHouse, Snowflake, MSSQL, BigQuery, Oracle, SQLite, ElasticSearch, MongoDB, DuckDB)</p></li>
</ul>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<ol>
<li><p>Exécutez le script <code class="docutils literal notranslate"><span class="pre">setup-mcp-gateway.ps1</span></code> pour télécharger et configurer le MCP Gateway :</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">.\</span><span class="n">setup-mcp-gateway</span><span class="p">.</span><span class="n">ps1</span>
</pre></div>
</div>
</li>
<li><p>Définissez la variable d’environnement pour autoriser l’utilisation des outils :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Windows (PowerShell)</span>
<span class="nv">$env</span>:N8N_COMMUNITY_PACKAGES_ALLOW_TOOL_USAGE<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;true&quot;</span>

<span class="c1"># Linux/macOS</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">N8N_COMMUNITY_PACKAGES_ALLOW_TOOL_USAGE</span><span class="o">=</span><span class="nb">true</span>
</pre></div>
</div>
</li>
<li><p>Configurez le fichier <code class="docutils literal notranslate"><span class="pre">gateway.yaml</span></code> avec vos informations de connexion à la base de données :</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">api</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Gateway API</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">API générée par Gateway</span>
<span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1.0&#39;</span>
<span class="nt">database</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>
<span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;postgres://user:password@localhost:5432/database?sslmode=disable&quot;</span>
<span class="w">  </span><span class="nt">tables</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="configuration-des-identifiants-mcp-dans-n8n">
<h2>Configuration des identifiants MCP dans n8n<a class="headerlink" href="#configuration-des-identifiants-mcp-dans-n8n" title="Link to this heading"></a></h2>
<ol class="simple">
<li><p>Ouvrez n8n et accédez à “Credentials”</p></li>
<li><p>Cliquez sur “Create New”</p></li>
<li><p>Recherchez “MCP Client (STDIO) API” et sélectionnez-le</p></li>
<li><p>Configurez les identifiants comme suit :</p>
<ul class="simple">
<li><p><strong>Nom</strong> : MCP Gateway</p></li>
<li><p><strong>Command</strong> : Chemin complet vers le binaire gateway.exe</p></li>
<li><p><strong>Arguments</strong> : start –config Chemin/vers/gateway.yaml mcp-stdio</p></li>
<li><p><strong>Environments</strong> : N8N_COMMUNITY_PACKAGES_ALLOW_TOOL_USAGE=true</p></li>
</ul>
</li>
</ol>
</section>
<section id="generation-de-l-api">
<h2>Génération de l’API<a class="headerlink" href="#generation-de-l-api" title="Link to this heading"></a></h2>
<p>Avant d’utiliser le MCP Gateway, vous devez générer une API à partir de votre base de données :</p>
<ol>
<li><p>Exécutez la commande de découverte :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>.<span class="se">\g</span>ateway<span class="se">\g</span>ateway.exe<span class="w"> </span>discover<span class="w"> </span>--ai-provider<span class="w"> </span>gemini<span class="w"> </span>--connection-string<span class="w"> </span><span class="s2">&quot;postgresql://user:password@host:5432/database?sslmode=disable&quot;</span><span class="w"> </span>--prompt<span class="w"> </span><span class="s2">&quot;Générer une API en lecture seule&quot;</span>
</pre></div>
</div>
</li>
<li><p>Cette commande analysera votre schéma de base de données et générera un fichier <code class="docutils literal notranslate"><span class="pre">gateway.yaml</span></code> avec la configuration de l’API.</p></li>
<li><p>Vous pouvez personnaliser ce fichier selon vos besoins.</p></li>
</ol>
</section>
<section id="utilisation-du-mcp-gateway-dans-un-workflow">
<h2>Utilisation du MCP Gateway dans un workflow<a class="headerlink" href="#utilisation-du-mcp-gateway-dans-un-workflow" title="Link to this heading"></a></h2>
<ol class="simple">
<li><p>Ajoutez un nœud “MCP Client” à votre workflow</p></li>
<li><p>Configurez le nœud comme suit :</p>
<ul class="simple">
<li><p><strong>Connection Type</strong> : Command Line (STDIO)</p></li>
<li><p><strong>Credentials</strong> : Sélectionnez les identifiants MCP Gateway que vous avez créés</p></li>
<li><p><strong>Operation</strong> : Choisissez l’opération souhaitée (List Tools, Execute Tool, etc.)</p></li>
</ul>
</li>
<li><p>Pour l’opération “Execute Tool” :</p>
<ul class="simple">
<li><p><strong>Tool Name</strong> : Nom de l’outil Gateway à exécuter</p></li>
<li><p><strong>Parameters</strong> : Paramètres de l’outil au format JSON</p></li>
</ul>
</li>
</ol>
</section>
<section id="fonctionnalites-principales">
<h2>Fonctionnalités principales<a class="headerlink" href="#fonctionnalites-principales" title="Link to this heading"></a></h2>
<p>Le MCP Gateway offre de nombreuses fonctionnalités :</p>
<ol class="simple">
<li><p><strong>Génération automatique d’API</strong> - Crée des API automatiquement en utilisant un LLM basé sur le schéma de la table et des données échantillonnées</p></li>
<li><p><strong>Support de bases de données structurées</strong> - Prend en charge PostgreSQL, MySQL, ClickHouse, Snowflake, MSSQL, BigQuery, Oracle, SQLite, ElasticSearch, MongoDB, DuckDB</p></li>
<li><p><strong>Support de plusieurs protocoles</strong> - Fournit des API en tant que REST ou serveur MCP, y compris le mode SSE</p></li>
<li><p><strong>Documentation API</strong> - Documentation Swagger générée automatiquement et spécification OpenAPI 3.1.0</p></li>
<li><p><strong>Protection PII</strong> - Implémente des plugins pour la suppression des données PII et sensibles</p></li>
<li><p><strong>Configuration flexible</strong> - Facilement extensible via la configuration YAML et le système de plugins</p></li>
<li><p><strong>Options de déploiement</strong> - Exécutez en tant que binaire ou conteneur Docker avec un chart Helm prêt à l’emploi</p></li>
<li><p><strong>Support de plusieurs fournisseurs d’IA</strong> - Support pour OpenAI, Anthropic, Amazon Bedrock, Google Gemini et Google VertexAI</p></li>
<li><p><strong>Local et sur site</strong> - Support pour les LLM auto-hébergés via des points de terminaison et des modèles d’IA configurables</p></li>
<li><p><strong>Sécurité au niveau des lignes (RLS)</strong> - Contrôle d’accès aux données granulaire à l’aide de scripts Lua</p></li>
<li><p><strong>Options d’authentification</strong> - Support intégré pour les clés API et OAuth</p></li>
<li><p><strong>Surveillance complète</strong> - Intégration avec OpenTelemetry (OTel) pour le suivi des requêtes et les pistes d’audit</p></li>
<li><p><strong>Optimisation des performances</strong> - Implémente des stratégies de mise en cache basées sur le temps et LRU</p></li>
</ol>
</section>
<section id="exemple-d-utilisation">
<h2>Exemple d’utilisation<a class="headerlink" href="#exemple-d-utilisation" title="Link to this heading"></a></h2>
<section id="interrogation-d-une-base-de-donnees">
<h3>Interrogation d’une base de données<a class="headerlink" href="#interrogation-d-une-base-de-donnees" title="Link to this heading"></a></h3>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;tool_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_customers&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;limit&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;offset&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="recherche-avec-filtres">
<h3>Recherche avec filtres<a class="headerlink" href="#recherche-avec-filtres" title="Link to this heading"></a></h3>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;tool_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;search_orders&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;completed&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;date_from&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-01-01&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;date_to&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-04-01&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="depannage">
<h2>Dépannage<a class="headerlink" href="#depannage" title="Link to this heading"></a></h2>
<p>Si vous rencontrez des problèmes :</p>
<ol class="simple">
<li><p>Vérifiez que la variable d’environnement <code class="docutils literal notranslate"><span class="pre">N8N_COMMUNITY_PACKAGES_ALLOW_TOOL_USAGE</span></code> est définie sur “true”</p></li>
<li><p>Assurez-vous que le binaire Gateway est correctement installé et accessible</p></li>
<li><p>Vérifiez que votre fichier de configuration <code class="docutils literal notranslate"><span class="pre">gateway.yaml</span></code> est correctement configuré</p></li>
<li><p>Vérifiez que les chemins dans la configuration des identifiants MCP sont corrects et utilisent des chemins absolus</p></li>
<li><p>Redémarrez n8n après avoir effectué ces modifications</p></li>
</ol>
</section>
<section id="ressources-supplementaires">
<h2>Ressources supplémentaires<a class="headerlink" href="#ressources-supplementaires" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.centralmind.ai">Documentation officielle de Gateway</a></p></li>
<li><p><a class="reference external" href="https://github.com/centralmind/gateway">GitHub de Gateway</a></p></li>
<li><p><a class="reference external" href="https://docs.centralmind.ai/connectors/">Documentation sur les connecteurs de base de données</a></p></li>
<li><p><a class="reference external" href="https://docs.centralmind.ai/plugins/">Documentation sur les plugins</a></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, EMAIL_SENDER_1 Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>