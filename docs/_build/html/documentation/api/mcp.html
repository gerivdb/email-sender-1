

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Intégration avec Model Context Protocol (MCP) &mdash; EMAIL_SENDER_1 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=8d563738"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            EMAIL_SENDER_1
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contenu:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">Documentation des API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">EMAIL_SENDER_1</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Intégration avec Model Context Protocol (MCP)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/documentation/api/mcp.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="integration-avec-model-context-protocol-mcp">
<h1>Intégration avec Model Context Protocol (MCP)<a class="headerlink" href="#integration-avec-model-context-protocol-mcp" title="Link to this heading"></a></h1>
<p>Cette documentation détaille l’intégration entre le système de journal de bord RAG et le Model Context Protocol (MCP) développé par Anthropic.</p>
<section id="vue-d-ensemble">
<h2>Vue d’ensemble<a class="headerlink" href="#vue-d-ensemble" title="Link to this heading"></a></h2>
<p>Le Model Context Protocol (MCP) est un protocole qui permet aux modèles d’IA d’interagir avec des systèmes externes comme le système de fichiers, les bases de données et les APIs. L’intégration avec le journal de bord permet aux modèles d’IA d’accéder directement au journal et d’interagir avec lui.</p>
</section>
<section id="architecture">
<h2>Architecture<a class="headerlink" href="#architecture" title="Link to this heading"></a></h2>
<p>L’intégration est basée sur une architecture de provider MCP:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>┌─────────────────┐                 ┌─────────────────┐
│                 │                 │                 │
│  Modèle d&#39;IA    │ ◄─── Query ──── │  MCP Server     │
│  (Claude)       │                 │                 │
│                 │ ─── Response ─► │                 │
│                 │                 │                 │
└─────────────────┘                 └─────────────────┘
                                           │
                                           │
                                           ▼
                                    ┌─────────────────┐
                                    │                 │
                                    │  Journal        │
                                    │  Provider       │
                                    │                 │
                                    └─────────────────┘
                                           │
                                           │
                                           ▼
                                    ┌─────────────────┐
                                    │                 │
                                    │  Journal de     │
                                    │  Bord RAG       │
                                    │                 │
                                    └─────────────────┘
</pre></div>
</div>
</section>
<section id="implementation">
<h2>Implémentation<a class="headerlink" href="#implementation" title="Link to this heading"></a></h2>
<section id="script-principal-journal-provider-js">
<h3>Script principal: journal_provider.js<a class="headerlink" href="#script-principal-journal-provider-js" title="Link to this heading"></a></h3>
<p>Ce script implémente le provider MCP pour le journal de bord:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">fs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">execSync</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;child_process&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">yaml</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;js-yaml&#39;</span><span class="p">);</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">JournalProvider</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">journalDir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">cwd</span><span class="p">(),</span><span class="w"> </span><span class="s1">&#39;docs&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;journal_de_bord&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">entriesDir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">journalDir</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;entries&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">ragDir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">journalDir</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;rag&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">pythonScriptsDir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">cwd</span><span class="p">(),</span><span class="w"> </span><span class="s1">&#39;scripts&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;python&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;journal&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">listEntries</span><span class="p">(</span><span class="nx">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{})</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Liste les entrées du journal avec filtrage optionnel</span>
<span class="w">    </span><span class="p">...</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">getEntry</span><span class="p">(</span><span class="nx">entryPath</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Récupère le contenu d&#39;une entrée spécifique</span>
<span class="w">    </span><span class="p">...</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">searchJournal</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span><span class="w"> </span><span class="nx">limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Recherche dans le journal</span>
<span class="w">    </span><span class="p">...</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">queryRag</span><span class="p">(</span><span class="nx">query</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Interroge le système RAG du journal</span>
<span class="w">    </span><span class="p">...</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">createEntry</span><span class="p">(</span><span class="nx">entryData</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Crée une nouvelle entrée dans le journal</span>
<span class="w">    </span><span class="p">...</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">async</span><span class="w"> </span><span class="nx">annotateEntry</span><span class="p">(</span><span class="nx">entryPath</span><span class="p">,</span><span class="w"> </span><span class="nx">section</span><span class="p">,</span><span class="w"> </span><span class="nx">annotation</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Ajoute une annotation à une entrée existante</span>
<span class="w">    </span><span class="p">...</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">JournalProvider</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="configuration-mcp">
<h3>Configuration MCP<a class="headerlink" href="#configuration-mcp" title="Link to this heading"></a></h3>
<p>Le fichier <code class="docutils literal notranslate"><span class="pre">scripts/mcp/config.js</span></code> configure le provider MCP:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">JournalProvider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./journal_provider&#39;</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">providers</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;journal&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">provider</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">JournalProvider</span><span class="p">(),</span>
<span class="w">      </span><span class="nx">methods</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">listEntries</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Liste les entrées du journal de bord&#39;</span><span class="p">,</span>
<span class="w">          </span><span class="nx">parameters</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">              </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;options&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;object&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Options de filtrage (tag, date, limit, sortBy, sortOrder)&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nx">getEntry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Récupère le contenu d\&#39;une entrée spécifique&#39;</span><span class="p">,</span>
<span class="w">          </span><span class="nx">parameters</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">              </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;entryPath&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Chemin de l\&#39;entrée (nom du fichier)&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nx">searchJournal</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Recherche dans le journal de bord&#39;</span><span class="p">,</span>
<span class="w">          </span><span class="nx">parameters</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">              </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;query&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Requête de recherche&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">              </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;limit&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;number&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Nombre maximum de résultats&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nx">queryRag</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Interroge le système RAG du journal&#39;</span><span class="p">,</span>
<span class="w">          </span><span class="nx">parameters</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">              </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;query&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Requête pour le RAG&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nx">createEntry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Crée une nouvelle entrée dans le journal&#39;</span><span class="p">,</span>
<span class="w">          </span><span class="nx">parameters</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">              </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;entryData&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;object&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Données de l\&#39;entrée (title, tags, content)&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nx">annotateEntry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Ajoute une annotation à une entrée existante&#39;</span><span class="p">,</span>
<span class="w">          </span><span class="nx">parameters</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">              </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;entryPath&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Chemin de l\&#39;entrée (nom du fichier)&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">              </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;section&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Section à annoter&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">              </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;annotation&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Annotation à ajouter&#39;</span><span class="p">,</span>
<span class="w">              </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
</section>
<section id="methodes-exposees">
<h2>Méthodes exposées<a class="headerlink" href="#methodes-exposees" title="Link to this heading"></a></h2>
<section id="listentries">
<h3>listEntries<a class="headerlink" href="#listentries" title="Link to this heading"></a></h3>
<p>Liste les entrées du journal avec filtrage optionnel.</p>
<section id="parametres">
<h4>Paramètres<a class="headerlink" href="#parametres" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code> (objet, optionnel):</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">tag</span></code> (string): Filtre par tag</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">date</span></code> (string): Filtre par date (format: YYYY-MM-DD)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">limit</span></code> (number): Nombre maximum d’entrées à retourner</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sortBy</span></code> (string): Champ de tri (date, title, etc.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sortOrder</span></code> (string): Ordre de tri (asc, desc)</p></li>
</ul>
</li>
</ul>
</section>
<section id="exemple-d-utilisation">
<h4>Exemple d’utilisation<a class="headerlink" href="#exemple-d-utilisation" title="Link to this heading"></a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">entries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">mcp</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="s1">&#39;journal&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;listEntries&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">tag</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;rag&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">limit</span><span class="o">:</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span>
<span class="w">  </span><span class="nx">sortBy</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;date&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">sortOrder</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;desc&#39;</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
</section>
<section id="getentry">
<h3>getEntry<a class="headerlink" href="#getentry" title="Link to this heading"></a></h3>
<p>Récupère le contenu d’une entrée spécifique.</p>
<section id="id1">
<h4>Paramètres<a class="headerlink" href="#id1" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">entryPath</span></code> (string): Chemin de l’entrée (nom du fichier)</p></li>
</ul>
</section>
<section id="id2">
<h4>Exemple d’utilisation<a class="headerlink" href="#id2" title="Link to this heading"></a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">entry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">mcp</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="s1">&#39;journal&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;getEntry&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2025-04-05-14-30-implementation-du-systeme-rag.md&#39;</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="searchjournal">
<h3>searchJournal<a class="headerlink" href="#searchjournal" title="Link to this heading"></a></h3>
<p>Recherche dans le journal.</p>
<section id="id3">
<h4>Paramètres<a class="headerlink" href="#id3" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">query</span></code> (string): Requête de recherche</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">limit</span></code> (number, optionnel): Nombre maximum de résultats</p></li>
</ul>
</section>
<section id="id4">
<h4>Exemple d’utilisation<a class="headerlink" href="#id4" title="Link to this heading"></a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">mcp</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="s1">&#39;journal&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;searchJournal&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;système rag&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="queryrag">
<h3>queryRag<a class="headerlink" href="#queryrag" title="Link to this heading"></a></h3>
<p>Interroge le système RAG du journal.</p>
<section id="id5">
<h4>Paramètres<a class="headerlink" href="#id5" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">query</span></code> (string): Requête pour le RAG</p></li>
</ul>
</section>
<section id="id6">
<h4>Exemple d’utilisation<a class="headerlink" href="#id6" title="Link to this heading"></a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">mcp</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="s1">&#39;journal&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;queryRag&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Quelles sont les optimisations identifiées pour le système RAG?&#39;</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="createentry">
<h3>createEntry<a class="headerlink" href="#createentry" title="Link to this heading"></a></h3>
<p>Crée une nouvelle entrée dans le journal.</p>
<section id="id7">
<h4>Paramètres<a class="headerlink" href="#id7" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">entryData</span></code> (objet):</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">title</span></code> (string): Titre de l’entrée</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tags</span></code> (array, optionnel): Liste de tags</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">content</span></code> (objet, optionnel): Contenu de l’entrée par section</p></li>
</ul>
</li>
</ul>
</section>
<section id="id8">
<h4>Exemple d’utilisation<a class="headerlink" href="#id8" title="Link to this heading"></a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">mcp</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="s1">&#39;journal&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;createEntry&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Nouvelle entrée via MCP&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">tags</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;mcp&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;test&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;automation&#39;</span><span class="p">],</span>
<span class="w">  </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s1">&#39;Actions réalisées&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;- Création d\&#39;une entrée via MCP\n- Test de l\&#39;intégration&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="s1">&#39;Enseignements techniques&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;- MCP permet aux modèles d\&#39;IA d\&#39;interagir avec le journal&#39;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
</section>
<section id="annotateentry">
<h3>annotateEntry<a class="headerlink" href="#annotateentry" title="Link to this heading"></a></h3>
<p>Ajoute une annotation à une entrée existante.</p>
<section id="id9">
<h4>Paramètres<a class="headerlink" href="#id9" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">entryPath</span></code> (string): Chemin de l’entrée (nom du fichier)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">section</span></code> (string): Section à annoter</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">annotation</span></code> (string): Annotation à ajouter</p></li>
</ul>
</section>
<section id="id10">
<h4>Exemple d’utilisation<a class="headerlink" href="#id10" title="Link to this heading"></a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">mcp</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="s1">&#39;journal&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;annotateEntry&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">  </span><span class="s1">&#39;2025-04-05-14-30-implementation-du-systeme-rag.md&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="s1">&#39;Enseignements techniques&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="s1">&#39;Cette implémentation pourrait être améliorée en utilisant des embeddings vectoriels.&#39;</span>
<span class="p">);</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="demarrage-du-serveur-mcp">
<h2>Démarrage du serveur MCP<a class="headerlink" href="#demarrage-du-serveur-mcp" title="Link to this heading"></a></h2>
<p>Le script <code class="docutils literal notranslate"><span class="pre">start-journal-mcp.ps1</span></code> permet de démarrer le serveur MCP avec le provider du journal:</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="c"># Démarrer le serveur MCP</span>
<span class="p">.\</span><span class="n">scripts</span><span class="p">\</span><span class="n">cmd</span><span class="p">\</span><span class="nb">start-journal</span><span class="n">-mcp</span><span class="p">.</span><span class="n">ps1</span>
</pre></div>
</div>
<p>Ce script:</p>
<ol class="simple">
<li><p>Vérifie si le module MCP est installé</p></li>
<li><p>Installe les dépendances nécessaires</p></li>
<li><p>Démarre le serveur MCP avec la configuration du journal</p></li>
</ol>
</section>
<section id="utilisation-avec-claude">
<h2>Utilisation avec Claude<a class="headerlink" href="#utilisation-avec-claude" title="Link to this heading"></a></h2>
<p>Une fois le serveur MCP démarré, Claude peut interagir avec le journal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Utilisateur: Peux-tu me lister les 3 entrées les plus récentes du journal de bord?

Claude: Je vais utiliser MCP pour accéder au journal de bord et lister les entrées les plus récentes.

[Claude utilise MCP pour appeler journal.listEntries avec limit=3, sortBy=&#39;date&#39;, sortOrder=&#39;desc&#39;]

Voici les 3 entrées les plus récentes du journal de bord:

1. &quot;Optimisation du système RAG&quot; (2025-04-10)
   Tags: rag, optimisation, performance
   
2. &quot;Intégration avec GitHub&quot; (2025-04-08)
   Tags: github, integration, automation
   
3. &quot;Implémentation du système RAG&quot; (2025-04-05)
   Tags: rag, implementation, python

Souhaitez-vous que j&#39;affiche le contenu d&#39;une de ces entrées?
</pre></div>
</div>
</section>
<section id="considerations-techniques">
<h2>Considérations techniques<a class="headerlink" href="#considerations-techniques" title="Link to this heading"></a></h2>
<section id="dependances">
<h3>Dépendances<a class="headerlink" href="#dependances" title="Link to this heading"></a></h3>
<p>Le provider MCP utilise plusieurs bibliothèques Node.js:</p>
<ul class="simple">
<li><p><strong>fs</strong> et <strong>path</strong>: Pour l’accès au système de fichiers</p></li>
<li><p><strong>child_process</strong>: Pour exécuter les scripts Python</p></li>
<li><p><strong>js-yaml</strong>: Pour parser les métadonnées YAML</p></li>
</ul>
</section>
<section id="performance">
<h3>Performance<a class="headerlink" href="#performance" title="Link to this heading"></a></h3>
<p>Pour optimiser les performances:</p>
<ol class="simple">
<li><p>Les résultats de recherche sont mis en cache pour éviter des appels répétés</p></li>
<li><p>Les opérations lourdes (comme la recherche RAG) sont déléguées aux scripts Python existants</p></li>
</ol>
</section>
<section id="securite">
<h3>Sécurité<a class="headerlink" href="#securite" title="Link to this heading"></a></h3>
<p>Les considérations de sécurité incluent:</p>
<ol class="simple">
<li><p>Le serveur MCP n’est accessible que localement (localhost)</p></li>
<li><p>Les opérations d’écriture (createEntry, annotateEntry) devraient être limitées aux utilisateurs autorisés</p></li>
</ol>
</section>
</section>
<section id="limitations-actuelles">
<h2>Limitations actuelles<a class="headerlink" href="#limitations-actuelles" title="Link to this heading"></a></h2>
<ol class="simple">
<li><p><strong>Pas d’authentification</strong>: Le serveur MCP n’implémente pas d’authentification</p></li>
<li><p><strong>Opérations synchrones</strong>: Les opérations sont exécutées de manière synchrone, ce qui peut bloquer le serveur</p></li>
<li><p><strong>Pas de validation avancée</strong>: La validation des entrées est minimale</p></li>
</ol>
</section>
<section id="ameliorations-futures">
<h2>Améliorations futures<a class="headerlink" href="#ameliorations-futures" title="Link to this heading"></a></h2>
<ol class="simple">
<li><p><strong>Authentification</strong>: Ajouter un mécanisme d’authentification</p></li>
<li><p><strong>Opérations asynchrones</strong>: Utiliser des opérations asynchrones pour éviter de bloquer le serveur</p></li>
<li><p><strong>Validation avancée</strong>: Ajouter une validation plus stricte des entrées</p></li>
<li><p><strong>WebSockets</strong>: Utiliser WebSockets pour les notifications en temps réel</p></li>
<li><p><strong>Interface d’administration</strong>: Ajouter une interface d’administration pour gérer le serveur MCP</p></li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, EMAIL_SENDER_1 Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>